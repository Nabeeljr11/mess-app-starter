{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\mohdn\\\\OneDrive\\\\Desktop\\\\mess-app-starter\\\\src\\\\UserProfilePage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { auth, db } from \"./firebase\";\nimport { doc, getDoc, updateDoc } from \"firebase/firestore\";\nimport { getStorage, ref as storageRef, uploadBytes, getDownloadURL, uploadBytesResumable } from \"firebase/storage\";\nimport { updateProfile } from \"firebase/auth\";\nimport \"./UserProfilePage.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction UserProfilePage({\n  currentUser,\n  onLogout,\n  onBack\n}) {\n  _s();\n  const [userData, setUserData] = useState({\n    name: '',\n    department: '',\n    phone: '',\n    email: ''\n  });\n  const [loading, setLoading] = useState(true);\n  const [isEditing, setIsEditing] = useState(false);\n  const [avatarUrl, setAvatarUrl] = useState(\"\");\n  // Cropper state\n  const [showCropper, setShowCropper] = useState(false);\n  const [cropSrc, setCropSrc] = useState(\"\");\n  const [imgMeta, setImgMeta] = useState({\n    w: 0,\n    h: 0\n  });\n  const [zoom, setZoom] = useState(1);\n  const [offsetX, setOffsetX] = useState(0);\n  const [offsetY, setOffsetY] = useState(0);\n  const cropSize = 280; // square preview in px\n  const [initialZoom, setInitialZoom] = useState(1);\n  const [uploading, setUploading] = useState(false);\n  const [uploadProgress, setUploadProgress] = useState(0);\n\n  // Load user data\n  useEffect(() => {\n    const loadUserData = async () => {\n      if (!currentUser) return;\n      try {\n        const userRef = doc(db, \"users\", currentUser.uid);\n        const userSnap = await getDoc(userRef);\n        if (userSnap.exists()) {\n          const data = userSnap.data();\n          setUserData({\n            name: data.name || '',\n            department: data.department || data.branch || '',\n            phone: data.phone || '',\n            email: data.email || currentUser.email || ''\n          });\n          setAvatarUrl(data.photoURL || (currentUser === null || currentUser === void 0 ? void 0 : currentUser.photoURL) || \"\");\n        }\n      } catch (error) {\n        console.error(\"Error loading user data:\", error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    loadUserData();\n  }, [currentUser]);\n\n  // Handle form submission\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!currentUser) return;\n    try {\n      const userRef = doc(db, \"users\", currentUser.uid);\n      await updateDoc(userRef, {\n        name: userData.name,\n        department: userData.department,\n        phone: userData.phone\n      });\n      setIsEditing(false);\n      alert('Profile updated successfully!');\n    } catch (error) {\n      console.error(\"Error updating profile:\", error);\n      alert('Error updating profile. Please try again.');\n    }\n  };\n\n  // Handle logout\n  const handleLogout = async () => {\n    try {\n      await onLogout();\n    } catch (error) {\n      console.error(\"Error logging out:\", error);\n      alert('Error logging out. Please try again.');\n    }\n  };\n\n  // Handle input changes\n  const handleInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setUserData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n\n  // File pick -> open cropper\n  const onPickAvatar = e => {\n    var _e$target$files;\n    const file = (_e$target$files = e.target.files) === null || _e$target$files === void 0 ? void 0 : _e$target$files[0];\n    if (!file) return;\n    const reader = new FileReader();\n    reader.onload = () => {\n      const src = reader.result;\n      const img = new Image();\n      img.onload = () => {\n        const w = img.naturalWidth || img.width;\n        const h = img.naturalHeight || img.height;\n        setImgMeta({\n          w,\n          h\n        });\n        setCropSrc(src);\n        // default zoom to cover the square fully\n        const coverZoom = Math.max(cropSize / w, cropSize / h);\n        setInitialZoom(coverZoom);\n        setZoom(coverZoom);\n        setOffsetX(0);\n        setOffsetY(0);\n        setShowCropper(true);\n      };\n      img.src = src;\n    };\n    reader.readAsDataURL(file);\n    // allow selecting same file again\n    e.target.value = \"\";\n  };\n\n  // Compute and upload cropped blob\n  const confirmCropAndUpload = async () => {\n    if (!auth.currentUser || !cropSrc) return;\n    try {\n      // draw to canvas\n      const canvas = document.createElement(\"canvas\");\n      canvas.width = cropSize;\n      canvas.height = cropSize;\n      const ctx = canvas.getContext(\"2d\");\n\n      // Based on preview math (draw directly, let canvas clip)\n      const imgW = imgMeta.w;\n      const imgH = imgMeta.h;\n      const dispW = imgW * zoom;\n      const dispH = imgH * zoom;\n      const left = (cropSize - dispW) / 2 + offsetX;\n      const top = (cropSize - dispH) / 2 + offsetY;\n\n      // Clear and draw (no clamping)\n      ctx.clearRect(0, 0, cropSize, cropSize);\n      const img = await loadImage(cropSrc);\n      ctx.drawImage(img, left, top, dispW, dispH);\n      const blob = await new Promise(resolve => canvas.toBlob(resolve, \"image/jpeg\", 0.9));\n\n      // Upload with progress\n      const storage = getStorage();\n      const path = `userAvatars/${auth.currentUser.uid}`;\n      const ref = storageRef(storage, path);\n      setUploading(true);\n      setUploadProgress(0);\n      const task = uploadBytesResumable(ref, blob);\n      const url = await new Promise((resolve, reject) => {\n        task.on('state_changed', snap => {\n          if (snap.totalBytes) {\n            setUploadProgress(snap.bytesTransferred / snap.totalBytes * 100);\n          }\n        }, reject, async () => {\n          try {\n            const u = await getDownloadURL(task.snapshot.ref);\n            resolve(u);\n          } catch (e) {\n            reject(e);\n          }\n        });\n      });\n      await updateDoc(doc(db, \"users\", auth.currentUser.uid), {\n        photoURL: url\n      });\n      try {\n        await updateProfile(auth.currentUser, {\n          photoURL: url\n        });\n      } catch (_) {}\n      setAvatarUrl(url);\n      setShowCropper(false);\n      alert(\"✅ Profile picture updated\");\n    } catch (err) {\n      console.error(\"Crop/upload failed\", err);\n      alert(\"❌ Failed to update profile picture\");\n    } finally {\n      setUploading(false);\n      setUploadProgress(0);\n    }\n  };\n  function loadImage(src) {\n    return new Promise((resolve, reject) => {\n      const img = new Image();\n      img.onload = () => resolve(img);\n      img.onerror = reject;\n      img.src = src;\n    });\n  }\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-spinner\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"spinner\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Loading profile...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"profile-container\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile-content\",\n      children: [onBack && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"back-bar\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"back-to-home-btn\",\n          onClick: onBack,\n          children: \"\\u2190 Back to Dashboard\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"profile-header\",\n        style: {\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          gap: 12\n        },\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"profile-title\",\n          children: \"User Profile\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"avatar-section\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"avatar-circle\",\n          children: [avatarUrl ? /*#__PURE__*/_jsxDEV(\"img\", {\n            src: avatarUrl,\n            alt: \"Profile\",\n            className: \"avatar-img\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 15\n          }, this) : userData.name ? userData.name.charAt(0).toUpperCase() : 'U', /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"avatar-upload\",\n            title: \"Update profile picture\",\n            children: [\"\\uD83D\\uDCF7\", /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              accept: \"image/*\",\n              onChange: onPickAvatar,\n              hidden: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 9\n      }, this), showCropper && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-overlay\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"Crop Profile Picture\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 241,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"close-btn\",\n              onClick: () => setShowCropper(false),\n              children: \"\\xD7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 242,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal-body\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"cropper-wrapper\",\n              style: {\n                width: cropSize,\n                height: cropSize\n              },\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"crop-viewport\",\n                style: {\n                  width: cropSize,\n                  height: cropSize\n                },\n                children: cropSrc && /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: cropSrc,\n                  alt: \"to-crop\",\n                  className: \"crop-image\",\n                  style: {\n                    width: imgMeta.w * zoom,\n                    height: imgMeta.h * zoom,\n                    transform: `translate(${(cropSize - imgMeta.w * zoom) / 2 + offsetX}px, ${(cropSize - imgMeta.h * zoom) / 2 + offsetY}px)`\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 248,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 246,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 245,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"crop-controls\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"control\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Zoom\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 263,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"range\",\n                  min: initialZoom,\n                  max: 3,\n                  step: \"0.01\",\n                  value: zoom,\n                  onChange: e => setZoom(parseFloat(e.target.value))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 264,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 262,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"control\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Move X\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 267,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"range\",\n                  min: -cropSize * 2,\n                  max: cropSize * 2,\n                  step: \"1\",\n                  value: offsetX,\n                  onChange: e => setOffsetX(parseInt(e.target.value))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 268,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 266,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"control\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Move Y\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 271,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"range\",\n                  min: -cropSize * 2,\n                  max: cropSize * 2,\n                  step: \"1\",\n                  value: offsetY,\n                  onChange: e => setOffsetY(parseInt(e.target.value))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 272,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 270,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"edit-actions\",\n              style: {\n                marginTop: 12,\n                width: '100%',\n                flexWrap: 'wrap',\n                gap: 8\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"cancel-btn\",\n                onClick: () => !uploading && setShowCropper(false),\n                disabled: uploading,\n                children: \"Cancel\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 276,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"cancel-btn\",\n                onClick: () => {\n                  setZoom(initialZoom);\n                  setOffsetX(0);\n                  setOffsetY(0);\n                },\n                disabled: uploading,\n                children: \"Reset\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 277,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: 8,\n                  marginLeft: 'auto'\n                },\n                children: [uploading && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"progress-bar\",\n                  \"aria-label\": \"upload progress\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"progress-fill\",\n                    style: {\n                      width: `${Math.round(uploadProgress)}%`\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 281,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 280,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  className: \"save-btn\",\n                  onClick: confirmCropAndUpload,\n                  disabled: uploading,\n                  children: uploading ? `Saving ${Math.round(uploadProgress)}%` : 'Save'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 284,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 278,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 275,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"profile-form\",\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"name\",\n            className: \"form-label\",\n            children: \"Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            id: \"name\",\n            name: \"name\",\n            value: userData.name,\n            onChange: handleInputChange,\n            className: \"form-input\",\n            placeholder: \"Enter your full name\",\n            disabled: !isEditing,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 298,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"department\",\n            className: \"form-label\",\n            children: \"Department\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 312,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            id: \"department\",\n            name: \"department\",\n            value: userData.department,\n            onChange: handleInputChange,\n            className: \"form-input\",\n            placeholder: \"Enter your department\",\n            disabled: !isEditing,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 313,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"phone\",\n            className: \"form-label\",\n            children: \"Phone\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 327,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"tel\",\n            id: \"phone\",\n            name: \"phone\",\n            value: userData.phone,\n            onChange: handleInputChange,\n            className: \"form-input\",\n            placeholder: \"Enter your phone number\",\n            disabled: !isEditing,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 328,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"email\",\n            className: \"form-label\",\n            children: \"Email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 342,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"email\",\n            id: \"email\",\n            name: \"email\",\n            value: userData.email,\n            className: \"form-input\",\n            placeholder: \"Enter your email\",\n            disabled: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 343,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-actions\",\n          children: !isEditing ? /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"edit-btn\",\n            onClick: () => setIsEditing(true),\n            children: \"Edit Profile\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 357,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"edit-actions\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"cancel-btn\",\n              onClick: () => setIsEditing(false),\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 366,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              className: \"save-btn\",\n              children: \"Save Changes\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 373,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 365,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"logout-section\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"logout-btn\",\n          onClick: handleLogout,\n          children: \"Logout\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 386,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 385,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 207,\n    columnNumber: 5\n  }, this);\n}\n_s(UserProfilePage, \"aBGvAJUt33t/6kRgGxoPi+KkrYo=\");\n_c = UserProfilePage;\nexport default UserProfilePage;\nvar _c;\n$RefreshReg$(_c, \"UserProfilePage\");","map":{"version":3,"names":["React","useState","useEffect","auth","db","doc","getDoc","updateDoc","getStorage","ref","storageRef","uploadBytes","getDownloadURL","uploadBytesResumable","updateProfile","jsxDEV","_jsxDEV","UserProfilePage","currentUser","onLogout","onBack","_s","userData","setUserData","name","department","phone","email","loading","setLoading","isEditing","setIsEditing","avatarUrl","setAvatarUrl","showCropper","setShowCropper","cropSrc","setCropSrc","imgMeta","setImgMeta","w","h","zoom","setZoom","offsetX","setOffsetX","offsetY","setOffsetY","cropSize","initialZoom","setInitialZoom","uploading","setUploading","uploadProgress","setUploadProgress","loadUserData","userRef","uid","userSnap","exists","data","branch","photoURL","error","console","handleSubmit","e","preventDefault","alert","handleLogout","handleInputChange","value","target","prev","onPickAvatar","_e$target$files","file","files","reader","FileReader","onload","src","result","img","Image","naturalWidth","width","naturalHeight","height","coverZoom","Math","max","readAsDataURL","confirmCropAndUpload","canvas","document","createElement","ctx","getContext","imgW","imgH","dispW","dispH","left","top","clearRect","loadImage","drawImage","blob","Promise","resolve","toBlob","storage","path","task","url","reject","on","snap","totalBytes","bytesTransferred","u","snapshot","_","err","onerror","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","style","display","alignItems","justifyContent","gap","alt","charAt","toUpperCase","title","type","accept","onChange","hidden","transform","min","step","parseFloat","parseInt","marginTop","flexWrap","disabled","marginLeft","round","onSubmit","htmlFor","id","placeholder","required","_c","$RefreshReg$"],"sources":["C:/Users/mohdn/OneDrive/Desktop/mess-app-starter/src/UserProfilePage.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { auth, db } from \"./firebase\";\r\nimport { doc, getDoc, updateDoc } from \"firebase/firestore\";\r\nimport { getStorage, ref as storageRef, uploadBytes, getDownloadURL, uploadBytesResumable } from \"firebase/storage\";\r\nimport { updateProfile } from \"firebase/auth\";\r\nimport \"./UserProfilePage.css\";\r\n\r\nfunction UserProfilePage({ currentUser, onLogout, onBack }) {\r\n  const [userData, setUserData] = useState({\r\n    name: '',\r\n    department: '',\r\n    phone: '',\r\n    email: ''\r\n  });\r\n  const [loading, setLoading] = useState(true);\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [avatarUrl, setAvatarUrl] = useState(\"\");\r\n  // Cropper state\r\n  const [showCropper, setShowCropper] = useState(false);\r\n  const [cropSrc, setCropSrc] = useState(\"\");\r\n  const [imgMeta, setImgMeta] = useState({ w: 0, h: 0 });\r\n  const [zoom, setZoom] = useState(1);\r\n  const [offsetX, setOffsetX] = useState(0);\r\n  const [offsetY, setOffsetY] = useState(0);\r\n  const cropSize = 280; // square preview in px\r\n  const [initialZoom, setInitialZoom] = useState(1);\r\n  const [uploading, setUploading] = useState(false);\r\n  const [uploadProgress, setUploadProgress] = useState(0);\r\n\r\n  // Load user data\r\n  useEffect(() => {\r\n    const loadUserData = async () => {\r\n      if (!currentUser) return;\r\n      \r\n      try {\r\n        const userRef = doc(db, \"users\", currentUser.uid);\r\n        const userSnap = await getDoc(userRef);\r\n        \r\n        if (userSnap.exists()) {\r\n          const data = userSnap.data();\r\n          setUserData({\r\n            name: data.name || '',\r\n            department: data.department || data.branch || '',\r\n            phone: data.phone || '',\r\n            email: data.email || currentUser.email || ''\r\n          });\r\n          setAvatarUrl(data.photoURL || currentUser?.photoURL || \"\");\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error loading user data:\", error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    loadUserData();\r\n  }, [currentUser]);\r\n\r\n  // Handle form submission\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!currentUser) return;\r\n\r\n    try {\r\n      const userRef = doc(db, \"users\", currentUser.uid);\r\n      await updateDoc(userRef, {\r\n        name: userData.name,\r\n        department: userData.department,\r\n        phone: userData.phone\r\n      });\r\n      \r\n      setIsEditing(false);\r\n      alert('Profile updated successfully!');\r\n    } catch (error) {\r\n      console.error(\"Error updating profile:\", error);\r\n      alert('Error updating profile. Please try again.');\r\n    }\r\n  };\r\n\r\n  // Handle logout\r\n  const handleLogout = async () => {\r\n    try {\r\n      await onLogout();\r\n    } catch (error) {\r\n      console.error(\"Error logging out:\", error);\r\n      alert('Error logging out. Please try again.');\r\n    }\r\n  };\r\n\r\n  // Handle input changes\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setUserData(prev => ({\r\n      ...prev,\r\n      [name]: value\r\n    }));\r\n  };\r\n\r\n  // File pick -> open cropper\r\n  const onPickAvatar = (e) => {\r\n    const file = e.target.files?.[0];\r\n    if (!file) return;\r\n    const reader = new FileReader();\r\n    reader.onload = () => {\r\n      const src = reader.result;\r\n      const img = new Image();\r\n      img.onload = () => {\r\n        const w = img.naturalWidth || img.width;\r\n        const h = img.naturalHeight || img.height;\r\n        setImgMeta({ w, h });\r\n        setCropSrc(src);\r\n        // default zoom to cover the square fully\r\n        const coverZoom = Math.max(cropSize / w, cropSize / h);\r\n        setInitialZoom(coverZoom);\r\n        setZoom(coverZoom);\r\n        setOffsetX(0);\r\n        setOffsetY(0);\r\n        setShowCropper(true);\r\n      };\r\n      img.src = src;\r\n    };\r\n    reader.readAsDataURL(file);\r\n    // allow selecting same file again\r\n    e.target.value = \"\";\r\n  };\r\n\r\n  // Compute and upload cropped blob\r\n  const confirmCropAndUpload = async () => {\r\n    if (!auth.currentUser || !cropSrc) return;\r\n    try {\r\n      // draw to canvas\r\n      const canvas = document.createElement(\"canvas\");\r\n      canvas.width = cropSize;\r\n      canvas.height = cropSize;\r\n      const ctx = canvas.getContext(\"2d\");\r\n\r\n      // Based on preview math (draw directly, let canvas clip)\r\n      const imgW = imgMeta.w;\r\n      const imgH = imgMeta.h;\r\n      const dispW = imgW * zoom;\r\n      const dispH = imgH * zoom;\r\n      const left = (cropSize - dispW) / 2 + offsetX;\r\n      const top = (cropSize - dispH) / 2 + offsetY;\r\n\r\n      // Clear and draw (no clamping)\r\n      ctx.clearRect(0, 0, cropSize, cropSize);\r\n      const img = await loadImage(cropSrc);\r\n      ctx.drawImage(img, left, top, dispW, dispH);\r\n\r\n      const blob = await new Promise((resolve) => canvas.toBlob(resolve, \"image/jpeg\", 0.9));\r\n\r\n      // Upload with progress\r\n      const storage = getStorage();\r\n      const path = `userAvatars/${auth.currentUser.uid}`;\r\n      const ref = storageRef(storage, path);\r\n      setUploading(true);\r\n      setUploadProgress(0);\r\n      const task = uploadBytesResumable(ref, blob);\r\n      const url = await new Promise((resolve, reject) => {\r\n        task.on('state_changed', (snap) => {\r\n          if (snap.totalBytes) {\r\n            setUploadProgress((snap.bytesTransferred / snap.totalBytes) * 100);\r\n          }\r\n        }, reject, async () => {\r\n          try {\r\n            const u = await getDownloadURL(task.snapshot.ref);\r\n            resolve(u);\r\n          } catch (e) { reject(e); }\r\n        });\r\n      });\r\n      await updateDoc(doc(db, \"users\", auth.currentUser.uid), { photoURL: url });\r\n      try { await updateProfile(auth.currentUser, { photoURL: url }); } catch (_) {}\r\n      setAvatarUrl(url);\r\n      setShowCropper(false);\r\n      alert(\"✅ Profile picture updated\");\r\n    } catch (err) {\r\n      console.error(\"Crop/upload failed\", err);\r\n      alert(\"❌ Failed to update profile picture\");\r\n    }\r\n    finally {\r\n      setUploading(false);\r\n      setUploadProgress(0);\r\n    }\r\n  };\r\n\r\n  function loadImage(src) {\r\n    return new Promise((resolve, reject) => {\r\n      const img = new Image();\r\n      img.onload = () => resolve(img);\r\n      img.onerror = reject;\r\n      img.src = src;\r\n    });\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"profile-container\">\r\n        <div className=\"loading-spinner\">\r\n          <div className=\"spinner\"></div>\r\n          <p>Loading profile...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"profile-container\">\r\n      <div className=\"profile-content\">\r\n        {/* Back to Dashboard (prominent) */}\r\n        {onBack && (\r\n          <div className=\"back-bar\">\r\n            <button className=\"back-to-home-btn\" onClick={onBack}>\r\n              ← Back to Dashboard\r\n            </button>\r\n          </div>\r\n        )}\r\n        {/* Header */}\r\n        <div className=\"profile-header\" style={{display:'flex', alignItems:'center', justifyContent:'center', gap:12}}>\r\n          <h1 className=\"profile-title\">User Profile</h1>\r\n        </div>\r\n\r\n        {/* Avatar Section */}\r\n        <div className=\"avatar-section\">\r\n          <div className=\"avatar-circle\">\r\n            {avatarUrl ? (\r\n              <img src={avatarUrl} alt=\"Profile\" className=\"avatar-img\" />\r\n            ) : (\r\n              (userData.name ? userData.name.charAt(0).toUpperCase() : 'U')\r\n            )}\r\n            <label className=\"avatar-upload\" title=\"Update profile picture\">\r\n              📷\r\n              <input type=\"file\" accept=\"image/*\" onChange={onPickAvatar} hidden />\r\n            </label>\r\n          </div>\r\n        </div>\r\n\r\n        {showCropper && (\r\n          <div className=\"modal-overlay\">\r\n            <div className=\"modal-content\">\r\n              <div className=\"modal-header\">\r\n                <h2>Crop Profile Picture</h2>\r\n                <button className=\"close-btn\" onClick={() => setShowCropper(false)}>×</button>\r\n              </div>\r\n              <div className=\"modal-body\">\r\n                <div className=\"cropper-wrapper\" style={{ width: cropSize, height: cropSize }}>\r\n                  <div className=\"crop-viewport\" style={{ width: cropSize, height: cropSize }}>\r\n                    {cropSrc && (\r\n                      <img\r\n                        src={cropSrc}\r\n                        alt=\"to-crop\"\r\n                        className=\"crop-image\"\r\n                        style={{\r\n                          width: imgMeta.w * zoom,\r\n                          height: imgMeta.h * zoom,\r\n                          transform: `translate(${(cropSize - imgMeta.w * zoom) / 2 + offsetX}px, ${(cropSize - imgMeta.h * zoom) / 2 + offsetY}px)`\r\n                        }}\r\n                      />\r\n                    )}\r\n                  </div>\r\n                </div>\r\n                <div className=\"crop-controls\">\r\n                  <div className=\"control\">\r\n                    <label>Zoom</label>\r\n                    <input type=\"range\" min={initialZoom} max={3} step=\"0.01\" value={zoom} onChange={(e)=>setZoom(parseFloat(e.target.value))} />\r\n                  </div>\r\n                  <div className=\"control\">\r\n                    <label>Move X</label>\r\n                    <input type=\"range\" min={-cropSize*2} max={cropSize*2} step=\"1\" value={offsetX} onChange={(e)=>setOffsetX(parseInt(e.target.value))} />\r\n                  </div>\r\n                  <div className=\"control\">\r\n                    <label>Move Y</label>\r\n                    <input type=\"range\" min={-cropSize*2} max={cropSize*2} step=\"1\" value={offsetY} onChange={(e)=>setOffsetY(parseInt(e.target.value))} />\r\n                  </div>\r\n                </div>\r\n                <div className=\"edit-actions\" style={{marginTop: 12, width:'100%', flexWrap:'wrap', gap:8}}>\r\n                  <button type=\"button\" className=\"cancel-btn\" onClick={()=>!uploading && setShowCropper(false)} disabled={uploading}>Cancel</button>\r\n                  <button type=\"button\" className=\"cancel-btn\" onClick={()=>{ setZoom(initialZoom); setOffsetX(0); setOffsetY(0); }} disabled={uploading}>Reset</button>\r\n                  <div style={{display:'flex', alignItems:'center', gap:8, marginLeft:'auto'}}>\r\n                    {uploading && (\r\n                      <div className=\"progress-bar\" aria-label=\"upload progress\">\r\n                        <div className=\"progress-fill\" style={{width: `${Math.round(uploadProgress)}%`}}></div>\r\n                      </div>\r\n                    )}\r\n                    <button type=\"button\" className=\"save-btn\" onClick={confirmCropAndUpload} disabled={uploading}>\r\n                      {uploading ? `Saving ${Math.round(uploadProgress)}%` : 'Save'}\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Profile Form */}\r\n        <form className=\"profile-form\" onSubmit={handleSubmit}>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"name\" className=\"form-label\">Name</label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"name\"\r\n              name=\"name\"\r\n              value={userData.name}\r\n              onChange={handleInputChange}\r\n              className=\"form-input\"\r\n              placeholder=\"Enter your full name\"\r\n              disabled={!isEditing}\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"department\" className=\"form-label\">Department</label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"department\"\r\n              name=\"department\"\r\n              value={userData.department}\r\n              onChange={handleInputChange}\r\n              className=\"form-input\"\r\n              placeholder=\"Enter your department\"\r\n              disabled={!isEditing}\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"phone\" className=\"form-label\">Phone</label>\r\n            <input\r\n              type=\"tel\"\r\n              id=\"phone\"\r\n              name=\"phone\"\r\n              value={userData.phone}\r\n              onChange={handleInputChange}\r\n              className=\"form-input\"\r\n              placeholder=\"Enter your phone number\"\r\n              disabled={!isEditing}\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"email\" className=\"form-label\">Email</label>\r\n            <input\r\n              type=\"email\"\r\n              id=\"email\"\r\n              name=\"email\"\r\n              value={userData.email}\r\n              className=\"form-input\"\r\n              placeholder=\"Enter your email\"\r\n              disabled\r\n            />\r\n          </div>\r\n\r\n          {/* Action Buttons */}\r\n          <div className=\"form-actions\">\r\n            {!isEditing ? (\r\n              <button\r\n                type=\"button\"\r\n                className=\"edit-btn\"\r\n                onClick={() => setIsEditing(true)}\r\n              >\r\n                Edit Profile\r\n              </button>\r\n            ) : (\r\n              <div className=\"edit-actions\">\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"cancel-btn\"\r\n                  onClick={() => setIsEditing(false)}\r\n                >\r\n                  Cancel\r\n                </button>\r\n                <button\r\n                  type=\"submit\"\r\n                  className=\"save-btn\"\r\n                >\r\n                  Save Changes\r\n                </button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </form>\r\n\r\n        {/* Logout Button */}\r\n        <div className=\"logout-section\">\r\n          <button\r\n            className=\"logout-btn\"\r\n            onClick={handleLogout}\r\n          >\r\n            Logout\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default UserProfilePage;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,IAAI,EAAEC,EAAE,QAAQ,YAAY;AACrC,SAASC,GAAG,EAAEC,MAAM,EAAEC,SAAS,QAAQ,oBAAoB;AAC3D,SAASC,UAAU,EAAEC,GAAG,IAAIC,UAAU,EAAEC,WAAW,EAAEC,cAAc,EAAEC,oBAAoB,QAAQ,kBAAkB;AACnH,SAASC,aAAa,QAAQ,eAAe;AAC7C,OAAO,uBAAuB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE/B,SAASC,eAAeA,CAAC;EAAEC,WAAW;EAAEC,QAAQ;EAAEC;AAAO,CAAC,EAAE;EAAAC,EAAA;EAC1D,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGtB,QAAQ,CAAC;IACvCuB,IAAI,EAAE,EAAE;IACRC,UAAU,EAAE,EAAE;IACdC,KAAK,EAAE,EAAE;IACTC,KAAK,EAAE;EACT,CAAC,CAAC;EACF,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAG5B,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAAC6B,SAAS,EAAEC,YAAY,CAAC,GAAG9B,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM,CAAC+B,SAAS,EAAEC,YAAY,CAAC,GAAGhC,QAAQ,CAAC,EAAE,CAAC;EAC9C;EACA,MAAM,CAACiC,WAAW,EAAEC,cAAc,CAAC,GAAGlC,QAAQ,CAAC,KAAK,CAAC;EACrD,MAAM,CAACmC,OAAO,EAAEC,UAAU,CAAC,GAAGpC,QAAQ,CAAC,EAAE,CAAC;EAC1C,MAAM,CAACqC,OAAO,EAAEC,UAAU,CAAC,GAAGtC,QAAQ,CAAC;IAAEuC,CAAC,EAAE,CAAC;IAAEC,CAAC,EAAE;EAAE,CAAC,CAAC;EACtD,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAG1C,QAAQ,CAAC,CAAC,CAAC;EACnC,MAAM,CAAC2C,OAAO,EAAEC,UAAU,CAAC,GAAG5C,QAAQ,CAAC,CAAC,CAAC;EACzC,MAAM,CAAC6C,OAAO,EAAEC,UAAU,CAAC,GAAG9C,QAAQ,CAAC,CAAC,CAAC;EACzC,MAAM+C,QAAQ,GAAG,GAAG,CAAC,CAAC;EACtB,MAAM,CAACC,WAAW,EAAEC,cAAc,CAAC,GAAGjD,QAAQ,CAAC,CAAC,CAAC;EACjD,MAAM,CAACkD,SAAS,EAAEC,YAAY,CAAC,GAAGnD,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM,CAACoD,cAAc,EAAEC,iBAAiB,CAAC,GAAGrD,QAAQ,CAAC,CAAC,CAAC;;EAEvD;EACAC,SAAS,CAAC,MAAM;IACd,MAAMqD,YAAY,GAAG,MAAAA,CAAA,KAAY;MAC/B,IAAI,CAACrC,WAAW,EAAE;MAElB,IAAI;QACF,MAAMsC,OAAO,GAAGnD,GAAG,CAACD,EAAE,EAAE,OAAO,EAAEc,WAAW,CAACuC,GAAG,CAAC;QACjD,MAAMC,QAAQ,GAAG,MAAMpD,MAAM,CAACkD,OAAO,CAAC;QAEtC,IAAIE,QAAQ,CAACC,MAAM,CAAC,CAAC,EAAE;UACrB,MAAMC,IAAI,GAAGF,QAAQ,CAACE,IAAI,CAAC,CAAC;UAC5BrC,WAAW,CAAC;YACVC,IAAI,EAAEoC,IAAI,CAACpC,IAAI,IAAI,EAAE;YACrBC,UAAU,EAAEmC,IAAI,CAACnC,UAAU,IAAImC,IAAI,CAACC,MAAM,IAAI,EAAE;YAChDnC,KAAK,EAAEkC,IAAI,CAAClC,KAAK,IAAI,EAAE;YACvBC,KAAK,EAAEiC,IAAI,CAACjC,KAAK,IAAIT,WAAW,CAACS,KAAK,IAAI;UAC5C,CAAC,CAAC;UACFM,YAAY,CAAC2B,IAAI,CAACE,QAAQ,KAAI5C,WAAW,aAAXA,WAAW,uBAAXA,WAAW,CAAE4C,QAAQ,KAAI,EAAE,CAAC;QAC5D;MACF,CAAC,CAAC,OAAOC,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;MAClD,CAAC,SAAS;QACRlC,UAAU,CAAC,KAAK,CAAC;MACnB;IACF,CAAC;IAED0B,YAAY,CAAC,CAAC;EAChB,CAAC,EAAE,CAACrC,WAAW,CAAC,CAAC;;EAEjB;EACA,MAAM+C,YAAY,GAAG,MAAOC,CAAC,IAAK;IAChCA,CAAC,CAACC,cAAc,CAAC,CAAC;IAClB,IAAI,CAACjD,WAAW,EAAE;IAElB,IAAI;MACF,MAAMsC,OAAO,GAAGnD,GAAG,CAACD,EAAE,EAAE,OAAO,EAAEc,WAAW,CAACuC,GAAG,CAAC;MACjD,MAAMlD,SAAS,CAACiD,OAAO,EAAE;QACvBhC,IAAI,EAAEF,QAAQ,CAACE,IAAI;QACnBC,UAAU,EAAEH,QAAQ,CAACG,UAAU;QAC/BC,KAAK,EAAEJ,QAAQ,CAACI;MAClB,CAAC,CAAC;MAEFK,YAAY,CAAC,KAAK,CAAC;MACnBqC,KAAK,CAAC,+BAA+B,CAAC;IACxC,CAAC,CAAC,OAAOL,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;MAC/CK,KAAK,CAAC,2CAA2C,CAAC;IACpD;EACF,CAAC;;EAED;EACA,MAAMC,YAAY,GAAG,MAAAA,CAAA,KAAY;IAC/B,IAAI;MACF,MAAMlD,QAAQ,CAAC,CAAC;IAClB,CAAC,CAAC,OAAO4C,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,oBAAoB,EAAEA,KAAK,CAAC;MAC1CK,KAAK,CAAC,sCAAsC,CAAC;IAC/C;EACF,CAAC;;EAED;EACA,MAAME,iBAAiB,GAAIJ,CAAC,IAAK;IAC/B,MAAM;MAAE1C,IAAI;MAAE+C;IAAM,CAAC,GAAGL,CAAC,CAACM,MAAM;IAChCjD,WAAW,CAACkD,IAAI,KAAK;MACnB,GAAGA,IAAI;MACP,CAACjD,IAAI,GAAG+C;IACV,CAAC,CAAC,CAAC;EACL,CAAC;;EAED;EACA,MAAMG,YAAY,GAAIR,CAAC,IAAK;IAAA,IAAAS,eAAA;IAC1B,MAAMC,IAAI,IAAAD,eAAA,GAAGT,CAAC,CAACM,MAAM,CAACK,KAAK,cAAAF,eAAA,uBAAdA,eAAA,CAAiB,CAAC,CAAC;IAChC,IAAI,CAACC,IAAI,EAAE;IACX,MAAME,MAAM,GAAG,IAAIC,UAAU,CAAC,CAAC;IAC/BD,MAAM,CAACE,MAAM,GAAG,MAAM;MACpB,MAAMC,GAAG,GAAGH,MAAM,CAACI,MAAM;MACzB,MAAMC,GAAG,GAAG,IAAIC,KAAK,CAAC,CAAC;MACvBD,GAAG,CAACH,MAAM,GAAG,MAAM;QACjB,MAAMxC,CAAC,GAAG2C,GAAG,CAACE,YAAY,IAAIF,GAAG,CAACG,KAAK;QACvC,MAAM7C,CAAC,GAAG0C,GAAG,CAACI,aAAa,IAAIJ,GAAG,CAACK,MAAM;QACzCjD,UAAU,CAAC;UAAEC,CAAC;UAAEC;QAAE,CAAC,CAAC;QACpBJ,UAAU,CAAC4C,GAAG,CAAC;QACf;QACA,MAAMQ,SAAS,GAAGC,IAAI,CAACC,GAAG,CAAC3C,QAAQ,GAAGR,CAAC,EAAEQ,QAAQ,GAAGP,CAAC,CAAC;QACtDS,cAAc,CAACuC,SAAS,CAAC;QACzB9C,OAAO,CAAC8C,SAAS,CAAC;QAClB5C,UAAU,CAAC,CAAC,CAAC;QACbE,UAAU,CAAC,CAAC,CAAC;QACbZ,cAAc,CAAC,IAAI,CAAC;MACtB,CAAC;MACDgD,GAAG,CAACF,GAAG,GAAGA,GAAG;IACf,CAAC;IACDH,MAAM,CAACc,aAAa,CAAChB,IAAI,CAAC;IAC1B;IACAV,CAAC,CAACM,MAAM,CAACD,KAAK,GAAG,EAAE;EACrB,CAAC;;EAED;EACA,MAAMsB,oBAAoB,GAAG,MAAAA,CAAA,KAAY;IACvC,IAAI,CAAC1F,IAAI,CAACe,WAAW,IAAI,CAACkB,OAAO,EAAE;IACnC,IAAI;MACF;MACA,MAAM0D,MAAM,GAAGC,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;MAC/CF,MAAM,CAACR,KAAK,GAAGtC,QAAQ;MACvB8C,MAAM,CAACN,MAAM,GAAGxC,QAAQ;MACxB,MAAMiD,GAAG,GAAGH,MAAM,CAACI,UAAU,CAAC,IAAI,CAAC;;MAEnC;MACA,MAAMC,IAAI,GAAG7D,OAAO,CAACE,CAAC;MACtB,MAAM4D,IAAI,GAAG9D,OAAO,CAACG,CAAC;MACtB,MAAM4D,KAAK,GAAGF,IAAI,GAAGzD,IAAI;MACzB,MAAM4D,KAAK,GAAGF,IAAI,GAAG1D,IAAI;MACzB,MAAM6D,IAAI,GAAG,CAACvD,QAAQ,GAAGqD,KAAK,IAAI,CAAC,GAAGzD,OAAO;MAC7C,MAAM4D,GAAG,GAAG,CAACxD,QAAQ,GAAGsD,KAAK,IAAI,CAAC,GAAGxD,OAAO;;MAE5C;MACAmD,GAAG,CAACQ,SAAS,CAAC,CAAC,EAAE,CAAC,EAAEzD,QAAQ,EAAEA,QAAQ,CAAC;MACvC,MAAMmC,GAAG,GAAG,MAAMuB,SAAS,CAACtE,OAAO,CAAC;MACpC6D,GAAG,CAACU,SAAS,CAACxB,GAAG,EAAEoB,IAAI,EAAEC,GAAG,EAAEH,KAAK,EAAEC,KAAK,CAAC;MAE3C,MAAMM,IAAI,GAAG,MAAM,IAAIC,OAAO,CAAEC,OAAO,IAAKhB,MAAM,CAACiB,MAAM,CAACD,OAAO,EAAE,YAAY,EAAE,GAAG,CAAC,CAAC;;MAEtF;MACA,MAAME,OAAO,GAAGxG,UAAU,CAAC,CAAC;MAC5B,MAAMyG,IAAI,GAAG,eAAe9G,IAAI,CAACe,WAAW,CAACuC,GAAG,EAAE;MAClD,MAAMhD,GAAG,GAAGC,UAAU,CAACsG,OAAO,EAAEC,IAAI,CAAC;MACrC7D,YAAY,CAAC,IAAI,CAAC;MAClBE,iBAAiB,CAAC,CAAC,CAAC;MACpB,MAAM4D,IAAI,GAAGrG,oBAAoB,CAACJ,GAAG,EAAEmG,IAAI,CAAC;MAC5C,MAAMO,GAAG,GAAG,MAAM,IAAIN,OAAO,CAAC,CAACC,OAAO,EAAEM,MAAM,KAAK;QACjDF,IAAI,CAACG,EAAE,CAAC,eAAe,EAAGC,IAAI,IAAK;UACjC,IAAIA,IAAI,CAACC,UAAU,EAAE;YACnBjE,iBAAiB,CAAEgE,IAAI,CAACE,gBAAgB,GAAGF,IAAI,CAACC,UAAU,GAAI,GAAG,CAAC;UACpE;QACF,CAAC,EAAEH,MAAM,EAAE,YAAY;UACrB,IAAI;YACF,MAAMK,CAAC,GAAG,MAAM7G,cAAc,CAACsG,IAAI,CAACQ,QAAQ,CAACjH,GAAG,CAAC;YACjDqG,OAAO,CAACW,CAAC,CAAC;UACZ,CAAC,CAAC,OAAOvD,CAAC,EAAE;YAAEkD,MAAM,CAAClD,CAAC,CAAC;UAAE;QAC3B,CAAC,CAAC;MACJ,CAAC,CAAC;MACF,MAAM3D,SAAS,CAACF,GAAG,CAACD,EAAE,EAAE,OAAO,EAAED,IAAI,CAACe,WAAW,CAACuC,GAAG,CAAC,EAAE;QAAEK,QAAQ,EAAEqD;MAAI,CAAC,CAAC;MAC1E,IAAI;QAAE,MAAMrG,aAAa,CAACX,IAAI,CAACe,WAAW,EAAE;UAAE4C,QAAQ,EAAEqD;QAAI,CAAC,CAAC;MAAE,CAAC,CAAC,OAAOQ,CAAC,EAAE,CAAC;MAC7E1F,YAAY,CAACkF,GAAG,CAAC;MACjBhF,cAAc,CAAC,KAAK,CAAC;MACrBiC,KAAK,CAAC,2BAA2B,CAAC;IACpC,CAAC,CAAC,OAAOwD,GAAG,EAAE;MACZ5D,OAAO,CAACD,KAAK,CAAC,oBAAoB,EAAE6D,GAAG,CAAC;MACxCxD,KAAK,CAAC,oCAAoC,CAAC;IAC7C,CAAC,SACO;MACNhB,YAAY,CAAC,KAAK,CAAC;MACnBE,iBAAiB,CAAC,CAAC,CAAC;IACtB;EACF,CAAC;EAED,SAASoD,SAASA,CAACzB,GAAG,EAAE;IACtB,OAAO,IAAI4B,OAAO,CAAC,CAACC,OAAO,EAAEM,MAAM,KAAK;MACtC,MAAMjC,GAAG,GAAG,IAAIC,KAAK,CAAC,CAAC;MACvBD,GAAG,CAACH,MAAM,GAAG,MAAM8B,OAAO,CAAC3B,GAAG,CAAC;MAC/BA,GAAG,CAAC0C,OAAO,GAAGT,MAAM;MACpBjC,GAAG,CAACF,GAAG,GAAGA,GAAG;IACf,CAAC,CAAC;EACJ;EAEA,IAAIrD,OAAO,EAAE;IACX,oBACEZ,OAAA;MAAK8G,SAAS,EAAC,mBAAmB;MAAAC,QAAA,eAChC/G,OAAA;QAAK8G,SAAS,EAAC,iBAAiB;QAAAC,QAAA,gBAC9B/G,OAAA;UAAK8G,SAAS,EAAC;QAAS;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC,eAC/BnH,OAAA;UAAA+G,QAAA,EAAG;QAAkB;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACtB;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAEV;EAEA,oBACEnH,OAAA;IAAK8G,SAAS,EAAC,mBAAmB;IAAAC,QAAA,eAChC/G,OAAA;MAAK8G,SAAS,EAAC,iBAAiB;MAAAC,QAAA,GAE7B3G,MAAM,iBACLJ,OAAA;QAAK8G,SAAS,EAAC,UAAU;QAAAC,QAAA,eACvB/G,OAAA;UAAQ8G,SAAS,EAAC,kBAAkB;UAACM,OAAO,EAAEhH,MAAO;UAAA2G,QAAA,EAAC;QAEtD;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CACN,eAEDnH,OAAA;QAAK8G,SAAS,EAAC,gBAAgB;QAACO,KAAK,EAAE;UAACC,OAAO,EAAC,MAAM;UAAEC,UAAU,EAAC,QAAQ;UAAEC,cAAc,EAAC,QAAQ;UAAEC,GAAG,EAAC;QAAE,CAAE;QAAAV,QAAA,eAC5G/G,OAAA;UAAI8G,SAAS,EAAC,eAAe;UAAAC,QAAA,EAAC;QAAY;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC5C,CAAC,eAGNnH,OAAA;QAAK8G,SAAS,EAAC,gBAAgB;QAAAC,QAAA,eAC7B/G,OAAA;UAAK8G,SAAS,EAAC,eAAe;UAAAC,QAAA,GAC3B/F,SAAS,gBACRhB,OAAA;YAAKiE,GAAG,EAAEjD,SAAU;YAAC0G,GAAG,EAAC,SAAS;YAACZ,SAAS,EAAC;UAAY;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,GAE3D7G,QAAQ,CAACE,IAAI,GAAGF,QAAQ,CAACE,IAAI,CAACmH,MAAM,CAAC,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,GAAG,GAC1D,eACD5H,OAAA;YAAO8G,SAAS,EAAC,eAAe;YAACe,KAAK,EAAC,wBAAwB;YAAAd,QAAA,GAAC,cAE9D,eAAA/G,OAAA;cAAO8H,IAAI,EAAC,MAAM;cAACC,MAAM,EAAC,SAAS;cAACC,QAAQ,EAAEtE,YAAa;cAACuE,MAAM;YAAA;cAAAjB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAChE,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACL;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,EAELjG,WAAW,iBACVlB,OAAA;QAAK8G,SAAS,EAAC,eAAe;QAAAC,QAAA,eAC5B/G,OAAA;UAAK8G,SAAS,EAAC,eAAe;UAAAC,QAAA,gBAC5B/G,OAAA;YAAK8G,SAAS,EAAC,cAAc;YAAAC,QAAA,gBAC3B/G,OAAA;cAAA+G,QAAA,EAAI;YAAoB;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eAC7BnH,OAAA;cAAQ8G,SAAS,EAAC,WAAW;cAACM,OAAO,EAAEA,CAAA,KAAMjG,cAAc,CAAC,KAAK,CAAE;cAAA4F,QAAA,EAAC;YAAC;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC3E,CAAC,eACNnH,OAAA;YAAK8G,SAAS,EAAC,YAAY;YAAAC,QAAA,gBACzB/G,OAAA;cAAK8G,SAAS,EAAC,iBAAiB;cAACO,KAAK,EAAE;gBAAE/C,KAAK,EAAEtC,QAAQ;gBAAEwC,MAAM,EAAExC;cAAS,CAAE;cAAA+E,QAAA,eAC5E/G,OAAA;gBAAK8G,SAAS,EAAC,eAAe;gBAACO,KAAK,EAAE;kBAAE/C,KAAK,EAAEtC,QAAQ;kBAAEwC,MAAM,EAAExC;gBAAS,CAAE;gBAAA+E,QAAA,EACzE3F,OAAO,iBACNpB,OAAA;kBACEiE,GAAG,EAAE7C,OAAQ;kBACbsG,GAAG,EAAC,SAAS;kBACbZ,SAAS,EAAC,YAAY;kBACtBO,KAAK,EAAE;oBACL/C,KAAK,EAAEhD,OAAO,CAACE,CAAC,GAAGE,IAAI;oBACvB8C,MAAM,EAAElD,OAAO,CAACG,CAAC,GAAGC,IAAI;oBACxBwG,SAAS,EAAE,aAAa,CAAClG,QAAQ,GAAGV,OAAO,CAACE,CAAC,GAAGE,IAAI,IAAI,CAAC,GAAGE,OAAO,OAAO,CAACI,QAAQ,GAAGV,OAAO,CAACG,CAAC,GAAGC,IAAI,IAAI,CAAC,GAAGI,OAAO;kBACvH;gBAAE;kBAAAkF,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACH;cACF;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACE;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC,eACNnH,OAAA;cAAK8G,SAAS,EAAC,eAAe;cAAAC,QAAA,gBAC5B/G,OAAA;gBAAK8G,SAAS,EAAC,SAAS;gBAAAC,QAAA,gBACtB/G,OAAA;kBAAA+G,QAAA,EAAO;gBAAI;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC,eACnBnH,OAAA;kBAAO8H,IAAI,EAAC,OAAO;kBAACK,GAAG,EAAElG,WAAY;kBAAC0C,GAAG,EAAE,CAAE;kBAACyD,IAAI,EAAC,MAAM;kBAAC7E,KAAK,EAAE7B,IAAK;kBAACsG,QAAQ,EAAG9E,CAAC,IAAGvB,OAAO,CAAC0G,UAAU,CAACnF,CAAC,CAACM,MAAM,CAACD,KAAK,CAAC;gBAAE;kBAAAyD,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC1H,CAAC,eACNnH,OAAA;gBAAK8G,SAAS,EAAC,SAAS;gBAAAC,QAAA,gBACtB/G,OAAA;kBAAA+G,QAAA,EAAO;gBAAM;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC,eACrBnH,OAAA;kBAAO8H,IAAI,EAAC,OAAO;kBAACK,GAAG,EAAE,CAACnG,QAAQ,GAAC,CAAE;kBAAC2C,GAAG,EAAE3C,QAAQ,GAAC,CAAE;kBAACoG,IAAI,EAAC,GAAG;kBAAC7E,KAAK,EAAE3B,OAAQ;kBAACoG,QAAQ,EAAG9E,CAAC,IAAGrB,UAAU,CAACyG,QAAQ,CAACpF,CAAC,CAACM,MAAM,CAACD,KAAK,CAAC;gBAAE;kBAAAyD,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACpI,CAAC,eACNnH,OAAA;gBAAK8G,SAAS,EAAC,SAAS;gBAAAC,QAAA,gBACtB/G,OAAA;kBAAA+G,QAAA,EAAO;gBAAM;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC,eACrBnH,OAAA;kBAAO8H,IAAI,EAAC,OAAO;kBAACK,GAAG,EAAE,CAACnG,QAAQ,GAAC,CAAE;kBAAC2C,GAAG,EAAE3C,QAAQ,GAAC,CAAE;kBAACoG,IAAI,EAAC,GAAG;kBAAC7E,KAAK,EAAEzB,OAAQ;kBAACkG,QAAQ,EAAG9E,CAAC,IAAGnB,UAAU,CAACuG,QAAQ,CAACpF,CAAC,CAACM,MAAM,CAACD,KAAK,CAAC;gBAAE;kBAAAyD,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACpI,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC,eACNnH,OAAA;cAAK8G,SAAS,EAAC,cAAc;cAACO,KAAK,EAAE;gBAACkB,SAAS,EAAE,EAAE;gBAAEjE,KAAK,EAAC,MAAM;gBAAEkE,QAAQ,EAAC,MAAM;gBAAEf,GAAG,EAAC;cAAC,CAAE;cAAAV,QAAA,gBACzF/G,OAAA;gBAAQ8H,IAAI,EAAC,QAAQ;gBAAChB,SAAS,EAAC,YAAY;gBAACM,OAAO,EAAEA,CAAA,KAAI,CAACjF,SAAS,IAAIhB,cAAc,CAAC,KAAK,CAAE;gBAACsH,QAAQ,EAAEtG,SAAU;gBAAA4E,QAAA,EAAC;cAAM;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,eACnInH,OAAA;gBAAQ8H,IAAI,EAAC,QAAQ;gBAAChB,SAAS,EAAC,YAAY;gBAACM,OAAO,EAAEA,CAAA,KAAI;kBAAEzF,OAAO,CAACM,WAAW,CAAC;kBAAEJ,UAAU,CAAC,CAAC,CAAC;kBAAEE,UAAU,CAAC,CAAC,CAAC;gBAAE,CAAE;gBAAC0G,QAAQ,EAAEtG,SAAU;gBAAA4E,QAAA,EAAC;cAAK;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,eACtJnH,OAAA;gBAAKqH,KAAK,EAAE;kBAACC,OAAO,EAAC,MAAM;kBAAEC,UAAU,EAAC,QAAQ;kBAAEE,GAAG,EAAC,CAAC;kBAAEiB,UAAU,EAAC;gBAAM,CAAE;gBAAA3B,QAAA,GACzE5E,SAAS,iBACRnC,OAAA;kBAAK8G,SAAS,EAAC,cAAc;kBAAC,cAAW,iBAAiB;kBAAAC,QAAA,eACxD/G,OAAA;oBAAK8G,SAAS,EAAC,eAAe;oBAACO,KAAK,EAAE;sBAAC/C,KAAK,EAAE,GAAGI,IAAI,CAACiE,KAAK,CAACtG,cAAc,CAAC;oBAAG;kBAAE;oBAAA2E,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACpF,CACN,eACDnH,OAAA;kBAAQ8H,IAAI,EAAC,QAAQ;kBAAChB,SAAS,EAAC,UAAU;kBAACM,OAAO,EAAEvC,oBAAqB;kBAAC4D,QAAQ,EAAEtG,SAAU;kBAAA4E,QAAA,EAC3F5E,SAAS,GAAG,UAAUuC,IAAI,CAACiE,KAAK,CAACtG,cAAc,CAAC,GAAG,GAAG;gBAAM;kBAAA2E,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACvD,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACN,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CACN,eAGDnH,OAAA;QAAM8G,SAAS,EAAC,cAAc;QAAC8B,QAAQ,EAAE3F,YAAa;QAAA8D,QAAA,gBACpD/G,OAAA;UAAK8G,SAAS,EAAC,YAAY;UAAAC,QAAA,gBACzB/G,OAAA;YAAO6I,OAAO,EAAC,MAAM;YAAC/B,SAAS,EAAC,YAAY;YAAAC,QAAA,EAAC;UAAI;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC,eACzDnH,OAAA;YACE8H,IAAI,EAAC,MAAM;YACXgB,EAAE,EAAC,MAAM;YACTtI,IAAI,EAAC,MAAM;YACX+C,KAAK,EAAEjD,QAAQ,CAACE,IAAK;YACrBwH,QAAQ,EAAE1E,iBAAkB;YAC5BwD,SAAS,EAAC,YAAY;YACtBiC,WAAW,EAAC,sBAAsB;YAClCN,QAAQ,EAAE,CAAC3H,SAAU;YACrBkI,QAAQ;UAAA;YAAAhC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACT,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC,CAAC,eAENnH,OAAA;UAAK8G,SAAS,EAAC,YAAY;UAAAC,QAAA,gBACzB/G,OAAA;YAAO6I,OAAO,EAAC,YAAY;YAAC/B,SAAS,EAAC,YAAY;YAAAC,QAAA,EAAC;UAAU;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC,eACrEnH,OAAA;YACE8H,IAAI,EAAC,MAAM;YACXgB,EAAE,EAAC,YAAY;YACftI,IAAI,EAAC,YAAY;YACjB+C,KAAK,EAAEjD,QAAQ,CAACG,UAAW;YAC3BuH,QAAQ,EAAE1E,iBAAkB;YAC5BwD,SAAS,EAAC,YAAY;YACtBiC,WAAW,EAAC,uBAAuB;YACnCN,QAAQ,EAAE,CAAC3H,SAAU;YACrBkI,QAAQ;UAAA;YAAAhC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACT,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC,CAAC,eAENnH,OAAA;UAAK8G,SAAS,EAAC,YAAY;UAAAC,QAAA,gBACzB/G,OAAA;YAAO6I,OAAO,EAAC,OAAO;YAAC/B,SAAS,EAAC,YAAY;YAAAC,QAAA,EAAC;UAAK;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC,eAC3DnH,OAAA;YACE8H,IAAI,EAAC,KAAK;YACVgB,EAAE,EAAC,OAAO;YACVtI,IAAI,EAAC,OAAO;YACZ+C,KAAK,EAAEjD,QAAQ,CAACI,KAAM;YACtBsH,QAAQ,EAAE1E,iBAAkB;YAC5BwD,SAAS,EAAC,YAAY;YACtBiC,WAAW,EAAC,yBAAyB;YACrCN,QAAQ,EAAE,CAAC3H,SAAU;YACrBkI,QAAQ;UAAA;YAAAhC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACT,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC,CAAC,eAENnH,OAAA;UAAK8G,SAAS,EAAC,YAAY;UAAAC,QAAA,gBACzB/G,OAAA;YAAO6I,OAAO,EAAC,OAAO;YAAC/B,SAAS,EAAC,YAAY;YAAAC,QAAA,EAAC;UAAK;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC,eAC3DnH,OAAA;YACE8H,IAAI,EAAC,OAAO;YACZgB,EAAE,EAAC,OAAO;YACVtI,IAAI,EAAC,OAAO;YACZ+C,KAAK,EAAEjD,QAAQ,CAACK,KAAM;YACtBmG,SAAS,EAAC,YAAY;YACtBiC,WAAW,EAAC,kBAAkB;YAC9BN,QAAQ;UAAA;YAAAzB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACT,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC,CAAC,eAGNnH,OAAA;UAAK8G,SAAS,EAAC,cAAc;UAAAC,QAAA,EAC1B,CAACjG,SAAS,gBACTd,OAAA;YACE8H,IAAI,EAAC,QAAQ;YACbhB,SAAS,EAAC,UAAU;YACpBM,OAAO,EAAEA,CAAA,KAAMrG,YAAY,CAAC,IAAI,CAAE;YAAAgG,QAAA,EACnC;UAED;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,gBAETnH,OAAA;YAAK8G,SAAS,EAAC,cAAc;YAAAC,QAAA,gBAC3B/G,OAAA;cACE8H,IAAI,EAAC,QAAQ;cACbhB,SAAS,EAAC,YAAY;cACtBM,OAAO,EAAEA,CAAA,KAAMrG,YAAY,CAAC,KAAK,CAAE;cAAAgG,QAAA,EACpC;YAED;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eACTnH,OAAA;cACE8H,IAAI,EAAC,QAAQ;cACbhB,SAAS,EAAC,UAAU;cAAAC,QAAA,EACrB;YAED;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACN;QACN;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACE,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACF,CAAC,eAGPnH,OAAA;QAAK8G,SAAS,EAAC,gBAAgB;QAAAC,QAAA,eAC7B/G,OAAA;UACE8G,SAAS,EAAC,YAAY;UACtBM,OAAO,EAAE/D,YAAa;UAAA0D,QAAA,EACvB;QAED;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV;AAAC9G,EAAA,CApYQJ,eAAe;AAAAgJ,EAAA,GAAfhJ,eAAe;AAsYxB,eAAeA,eAAe;AAAC,IAAAgJ,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}