{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\mohdn\\\\OneDrive\\\\Desktop\\\\mess-app-starter\\\\src\\\\StudentPage.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { auth, db } from \"./firebase\";\nimport { doc, getDoc, setDoc } from \"firebase/firestore\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction StudentPage() {\n  _s();\n  var _auth$currentUser;\n  const [meals, setMeals] = useState({});\n  const uid = (_auth$currentUser = auth.currentUser) === null || _auth$currentUser === void 0 ? void 0 : _auth$currentUser.uid;\n  useEffect(() => {\n    if (!uid) return;\n    const fetchMeals = async () => {\n      const userMealsRef = doc(db, \"userMeals\", uid);\n      const docSnap = await getDoc(userMealsRef);\n      let savedMeals = {};\n      if (docSnap.exists()) {\n        savedMeals = docSnap.data();\n      }\n      const today = new Date();\n      let upcomingMeals = {};\n      for (let i = 0; i < 7; i++) {\n        const date = new Date(today);\n        date.setDate(today.getDate() + i);\n        const dateKey = date.toISOString().split(\"T\")[0];\n\n        // If no record exists in DB → default to true\n        if (!savedMeals[dateKey]) {\n          savedMeals[dateKey] = {\n            breakfast: true,\n            lunch: true,\n            supper: true\n          };\n        }\n        upcomingMeals[dateKey] = savedMeals[dateKey];\n      }\n      setMeals(upcomingMeals);\n\n      // save back any new defaults to Firestore\n      await setDoc(userMealsRef, savedMeals, {\n        merge: true\n      });\n    };\n    fetchMeals();\n  }, [uid]);\n  const toggleMeal = async (dateKey, mealType) => {\n    const updatedMeals = {\n      ...meals,\n      [dateKey]: {\n        ...meals[dateKey],\n        [mealType]: !meals[dateKey][mealType]\n      }\n    };\n    setMeals(updatedMeals);\n    const userMealsRef = doc(db, \"userMeals\", uid);\n    await setDoc(userMealsRef, updatedMeals, {\n      merge: true\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: \"20px\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Mark Your Meals (Next 7 Days)\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this), Object.keys(meals).map(dateKey => /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: \"15px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: dateKey\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 11\n      }, this), [\"breakfast\", \"lunch\", \"supper\"].map(mealType => /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => toggleMeal(dateKey, mealType),\n        style: {\n          margin: \"5px\",\n          padding: \"10px 15px\",\n          backgroundColor: meals[dateKey][mealType] ? \"lightgreen\" : \"red\",\n          color: \"white\",\n          border: \"none\",\n          borderRadius: \"8px\",\n          cursor: \"pointer\"\n        },\n        children: [mealType, \" \", meals[dateKey][mealType] ? \"✓\" : \"✗\"]\n      }, mealType, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 13\n      }, this))]\n    }, dateKey, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n}\n_s(StudentPage, \"wf7xVdchfH8fgkXU7Va9+tDjf1o=\");\n_c = StudentPage;\nexport default StudentPage;\nvar _c;\n$RefreshReg$(_c, \"StudentPage\");","map":{"version":3,"names":["React","useEffect","useState","auth","db","doc","getDoc","setDoc","jsxDEV","_jsxDEV","StudentPage","_s","_auth$currentUser","meals","setMeals","uid","currentUser","fetchMeals","userMealsRef","docSnap","savedMeals","exists","data","today","Date","upcomingMeals","i","date","setDate","getDate","dateKey","toISOString","split","breakfast","lunch","supper","merge","toggleMeal","mealType","updatedMeals","style","padding","children","fileName","_jsxFileName","lineNumber","columnNumber","Object","keys","map","marginBottom","onClick","margin","backgroundColor","color","border","borderRadius","cursor","_c","$RefreshReg$"],"sources":["C:/Users/mohdn/OneDrive/Desktop/mess-app-starter/src/StudentPage.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { auth, db } from \"./firebase\";\r\nimport { doc, getDoc, setDoc } from \"firebase/firestore\";\r\n\r\nfunction StudentPage() {\r\n  const [meals, setMeals] = useState({});\r\n  const uid = auth.currentUser?.uid;\r\n\r\n  useEffect(() => {\r\n    if (!uid) return;\r\n\r\n    const fetchMeals = async () => {\r\n      const userMealsRef = doc(db, \"userMeals\", uid);\r\n      const docSnap = await getDoc(userMealsRef);\r\n\r\n      let savedMeals = {};\r\n      if (docSnap.exists()) {\r\n        savedMeals = docSnap.data();\r\n      }\r\n\r\n      const today = new Date();\r\n      let upcomingMeals = {};\r\n\r\n      for (let i = 0; i < 7; i++) {\r\n        const date = new Date(today);\r\n        date.setDate(today.getDate() + i);\r\n        const dateKey = date.toISOString().split(\"T\")[0];\r\n\r\n        // If no record exists in DB → default to true\r\n        if (!savedMeals[dateKey]) {\r\n          savedMeals[dateKey] = {\r\n            breakfast: true,\r\n            lunch: true,\r\n            supper: true,\r\n          };\r\n        }\r\n\r\n        upcomingMeals[dateKey] = savedMeals[dateKey];\r\n      }\r\n\r\n      setMeals(upcomingMeals);\r\n\r\n      // save back any new defaults to Firestore\r\n      await setDoc(userMealsRef, savedMeals, { merge: true });\r\n    };\r\n\r\n    fetchMeals();\r\n  }, [uid]);\r\n\r\n  const toggleMeal = async (dateKey, mealType) => {\r\n    const updatedMeals = {\r\n      ...meals,\r\n      [dateKey]: {\r\n        ...meals[dateKey],\r\n        [mealType]: !meals[dateKey][mealType],\r\n      },\r\n    };\r\n\r\n    setMeals(updatedMeals);\r\n\r\n    const userMealsRef = doc(db, \"userMeals\", uid);\r\n    await setDoc(userMealsRef, updatedMeals, { merge: true });\r\n  };\r\n\r\n  return (\r\n    <div style={{ padding: \"20px\" }}>\r\n      <h2>Mark Your Meals (Next 7 Days)</h2>\r\n      {Object.keys(meals).map((dateKey) => (\r\n        <div key={dateKey} style={{ marginBottom: \"15px\" }}>\r\n          <h4>{dateKey}</h4>\r\n          {[\"breakfast\", \"lunch\", \"supper\"].map((mealType) => (\r\n            <button\r\n              key={mealType}\r\n              onClick={() => toggleMeal(dateKey, mealType)}\r\n              style={{\r\n                margin: \"5px\",\r\n                padding: \"10px 15px\",\r\n                backgroundColor: meals[dateKey][mealType] ? \"lightgreen\" : \"red\",\r\n                color: \"white\",\r\n                border: \"none\",\r\n                borderRadius: \"8px\",\r\n                cursor: \"pointer\",\r\n              }}\r\n            >\r\n              {mealType} {meals[dateKey][mealType] ? \"✓\" : \"✗\"}\r\n            </button>\r\n          ))}\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default StudentPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}