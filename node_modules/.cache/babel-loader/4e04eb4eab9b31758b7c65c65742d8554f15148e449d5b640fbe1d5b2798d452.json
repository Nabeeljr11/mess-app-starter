{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\mohdn\\\\OneDrive\\\\Desktop\\\\mess-app-starter\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { auth, db } from \"./firebase\";\nimport { signOut } from \"firebase/auth\";\nimport { doc, getDoc, setDoc, updateDoc, onSnapshot } from \"firebase/firestore\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function App() {\n  _s();\n  const [user, setUser] = useState(null);\n  const [role, setRole] = useState(\"student\"); // default role\n  const [meals, setMeals] = useState({\n    breakfast: false,\n    lunch: false,\n    dinner: false\n  });\n  const [totals, setTotals] = useState({\n    breakfast: 0,\n    lunch: 0,\n    dinner: 0\n  });\n  useEffect(() => {\n    const currentUser = auth.currentUser;\n    if (!currentUser) return;\n    setUser(currentUser);\n    const userRef = doc(db, \"users\", currentUser.uid);\n\n    // Fetch role + meals\n    async function fetchUserData() {\n      const userSnap = await getDoc(userRef);\n      if (userSnap.exists()) {\n        const data = userSnap.data();\n        setRole(data.role || \"student\");\n        setMeals(data.meals || {\n          breakfast: false,\n          lunch: false,\n          dinner: false\n        });\n      } else {\n        // if new user → set default as student\n        await setDoc(userRef, {\n          role: \"student\",\n          meals: {\n            breakfast: false,\n            lunch: false,\n            dinner: false\n          }\n        });\n        setRole(\"student\");\n        setMeals({\n          breakfast: false,\n          lunch: false,\n          dinner: false\n        });\n      }\n    }\n    fetchUserData();\n\n    // Listen to totals live\n    const unsub = onSnapshot(doc(db, \"totals\", \"mealsCount\"), docSnap => {\n      if (docSnap.exists()) {\n        setTotals(docSnap.data());\n      }\n    });\n    return () => unsub();\n  }, []);\n\n  // Toggle meal function\n  const toggleMeal = async mealName => {\n    const newMeals = {\n      ...meals,\n      [mealName]: !meals[mealName]\n    };\n    setMeals(newMeals);\n    const userRef = doc(db, \"users\", user.uid);\n    await updateDoc(userRef, {\n      meals: newMeals\n    });\n\n    // update totals in Firestore\n    const totalsRef = doc(db, \"totals\", \"mealsCount\");\n    const totalsSnap = await getDoc(totalsRef);\n    if (totalsSnap.exists()) {\n      const currentTotals = totalsSnap.data();\n      const updatedTotals = {\n        ...currentTotals\n      };\n      if (meals[mealName]) {\n        // turning OFF → subtract\n        updatedTotals[mealName] = Math.max(0, updatedTotals[mealName] - 1);\n      } else {\n        // turning ON → add\n        updatedTotals[mealName] = (updatedTotals[mealName] || 0) + 1;\n      }\n      await updateDoc(totalsRef, updatedTotals);\n    } else {\n      // first time totals doc\n      await setDoc(totalsRef, {\n        breakfast: newMeals.breakfast ? 1 : 0,\n        lunch: newMeals.lunch ? 1 : 0,\n        dinner: newMeals.dinner ? 1 : 0\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: \"20px\"\n    },\n    children: user && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: [\"Welcome, \", user.displayName]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Role: \", role]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => signOut(auth),\n        children: \"Logout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 11\n      }, this), role === \"student\" && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Select Your Meals\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => toggleMeal(\"breakfast\"),\n          children: meals.breakfast ? \"✓ Breakfast\" : \"Breakfast\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => toggleMeal(\"lunch\"),\n          children: meals.lunch ? \"✓ Lunch\" : \"Lunch\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => toggleMeal(\"dinner\"),\n          children: meals.dinner ? \"✓ Dinner\" : \"Dinner\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 13\n      }, this), role === \"admin\" && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Meals Count Dashboard\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Breakfast: \", totals.breakfast]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Lunch: \", totals.lunch]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Dinner: \", totals.dinner]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"IniWEXtXrDV7mtnKkZLzxcKKcT4=\");\n_c = App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useEffect","useState","auth","db","signOut","doc","getDoc","setDoc","updateDoc","onSnapshot","jsxDEV","_jsxDEV","Fragment","_Fragment","App","_s","user","setUser","role","setRole","meals","setMeals","breakfast","lunch","dinner","totals","setTotals","currentUser","userRef","uid","fetchUserData","userSnap","exists","data","unsub","docSnap","toggleMeal","mealName","newMeals","totalsRef","totalsSnap","currentTotals","updatedTotals","Math","max","style","padding","children","displayName","fileName","_jsxFileName","lineNumber","columnNumber","onClick","_c","$RefreshReg$"],"sources":["C:/Users/mohdn/OneDrive/Desktop/mess-app-starter/src/App.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { auth, db } from \"./firebase\";\r\nimport { signOut } from \"firebase/auth\";\r\nimport { doc, getDoc, setDoc, updateDoc, onSnapshot } from \"firebase/firestore\";\r\n\r\nexport default function App() {\r\n  const [user, setUser] = useState(null);\r\n  const [role, setRole] = useState(\"student\"); // default role\r\n  const [meals, setMeals] = useState({ breakfast: false, lunch: false, dinner: false });\r\n  const [totals, setTotals] = useState({ breakfast: 0, lunch: 0, dinner: 0 });\r\n\r\n  useEffect(() => {\r\n    const currentUser = auth.currentUser;\r\n    if (!currentUser) return;\r\n\r\n    setUser(currentUser);\r\n\r\n    const userRef = doc(db, \"users\", currentUser.uid);\r\n\r\n    // Fetch role + meals\r\n    async function fetchUserData() {\r\n      const userSnap = await getDoc(userRef);\r\n      if (userSnap.exists()) {\r\n        const data = userSnap.data();\r\n        setRole(data.role || \"student\");\r\n        setMeals(data.meals || { breakfast: false, lunch: false, dinner: false });\r\n      } else {\r\n        // if new user → set default as student\r\n        await setDoc(userRef, {\r\n          role: \"student\",\r\n          meals: { breakfast: false, lunch: false, dinner: false },\r\n        });\r\n        setRole(\"student\");\r\n        setMeals({ breakfast: false, lunch: false, dinner: false });\r\n      }\r\n    }\r\n\r\n    fetchUserData();\r\n\r\n    // Listen to totals live\r\n    const unsub = onSnapshot(doc(db, \"totals\", \"mealsCount\"), (docSnap) => {\r\n      if (docSnap.exists()) {\r\n        setTotals(docSnap.data());\r\n      }\r\n    });\r\n\r\n    return () => unsub();\r\n  }, []);\r\n\r\n  // Toggle meal function\r\n  const toggleMeal = async (mealName) => {\r\n    const newMeals = { ...meals, [mealName]: !meals[mealName] };\r\n    setMeals(newMeals);\r\n\r\n    const userRef = doc(db, \"users\", user.uid);\r\n    await updateDoc(userRef, { meals: newMeals });\r\n\r\n    // update totals in Firestore\r\n    const totalsRef = doc(db, \"totals\", \"mealsCount\");\r\n    const totalsSnap = await getDoc(totalsRef);\r\n    if (totalsSnap.exists()) {\r\n      const currentTotals = totalsSnap.data();\r\n      const updatedTotals = { ...currentTotals };\r\n\r\n      if (meals[mealName]) {\r\n        // turning OFF → subtract\r\n        updatedTotals[mealName] = Math.max(0, updatedTotals[mealName] - 1);\r\n      } else {\r\n        // turning ON → add\r\n        updatedTotals[mealName] = (updatedTotals[mealName] || 0) + 1;\r\n      }\r\n\r\n      await updateDoc(totalsRef, updatedTotals);\r\n    } else {\r\n      // first time totals doc\r\n      await setDoc(totalsRef, {\r\n        breakfast: newMeals.breakfast ? 1 : 0,\r\n        lunch: newMeals.lunch ? 1 : 0,\r\n        dinner: newMeals.dinner ? 1 : 0,\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{ padding: \"20px\" }}>\r\n      {user && (\r\n        <>\r\n          <h1>Welcome, {user.displayName}</h1>\r\n          <p>Role: {role}</p>\r\n          <button onClick={() => signOut(auth)}>Logout</button>\r\n\r\n          {role === \"student\" && (\r\n            <div>\r\n              <h2>Select Your Meals</h2>\r\n              <button onClick={() => toggleMeal(\"breakfast\")}>\r\n                {meals.breakfast ? \"✓ Breakfast\" : \"Breakfast\"}\r\n              </button>\r\n              <button onClick={() => toggleMeal(\"lunch\")}>\r\n                {meals.lunch ? \"✓ Lunch\" : \"Lunch\"}\r\n              </button>\r\n              <button onClick={() => toggleMeal(\"dinner\")}>\r\n                {meals.dinner ? \"✓ Dinner\" : \"Dinner\"}\r\n              </button>\r\n            </div>\r\n          )}\r\n\r\n          {role === \"admin\" && (\r\n            <div>\r\n              <h2>Meals Count Dashboard</h2>\r\n              <p>Breakfast: {totals.breakfast}</p>\r\n              <p>Lunch: {totals.lunch}</p>\r\n              <p>Dinner: {totals.dinner}</p>\r\n            </div>\r\n          )}\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}